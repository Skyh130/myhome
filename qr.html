<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR 코드 생성기 (화이트 & 핑크)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Font (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- QR Code Generator Library (qrcode.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* Inter 폰트를 기본 폰트로 설정 */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-white min-h-screen flex items-center justify-center p-4">

    <!-- 좌측 상단 돌아가기 버튼 추가 -->
    <a href="index.html" class="absolute top-4 left-4 flex items-center text-gray-400 hover:text-pink-500 transition-colors font-medium">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        돌아가기
    </a>

    <!-- 배경이 흰색이므로 카드에 테두리(border)를 추가하여 구분감을 주었습니다 -->
    <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-100 w-full max-w-md">
        
        <!-- 헤더 -->
        <h1 class="text-2xl sm:text-3xl font-bold text-center text-pink-700 mb-2">
            QR 코드 생성기
        </h1>
        <p class="text-pink-400 text-center mb-6">
            URL 주소나 텍스트를 입력하세요.
        </p>

        <!-- 입력 필드 -->
        <div class="mb-4">
            <label for="text-input" class="block text-sm font-medium text-pink-600 mb-1">
                텍스트 또는 URL
            </label>
            <input type="text" id="text-input" 
                   class="w-full p-3 border border-pink-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:outline-none transition" 
                   placeholder="https://www.example.com">
        </div>

        <!-- 생성 버튼 -->
        <button id="generate-btn" 
                class="w-full bg-pink-500 text-white p-3 rounded-lg font-semibold hover:bg-pink-600 transition duration-200">
            QR 코드 생성하기
        </button>

        <!-- QR 코드 표시 영역 -->
        <div id="qrcode-container" 
             class="mt-6 h-64 w-64 mx-auto border border-pink-200 rounded-lg flex items-center justify-center bg-pink-50 text-pink-400 text-sm p-4 text-center">
            QR 코드가 여기에 표시됩니다.
        </div>

        <!-- 다운로드 버튼 (초기에는 숨김) -->
        <button id="download-btn" 
                class="w-full bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600 transition duration-200 mt-4 hidden">
            PNG로 다운로드
        </button>

    </div>

    <script>
        // DOM 요소 가져오기
        const generateBtn = document.getElementById('generate-btn');
        const downloadBtn = document.getElementById('download-btn');
        const textInput = document.getElementById('text-input');
        const qrcodeContainer = document.getElementById('qrcode-container');

        let qrcodeInstance = null; // QR 코드 인스턴스를 저장할 변수

        // 생성 버튼 클릭 이벤트
        generateBtn.addEventListener('click', () => {
            const text = textInput.value.trim();

            // 입력값이 없으면 아무것도 하지 않음
            if (!text) {
                textInput.focus();
                return;
            }

            // 이전 QR 코드 삭제 (플레이스홀더 텍스트 포함)
            qrcodeContainer.innerHTML = '';

            // 새 QR 코드 생성
            // qrcode.js 라이브러리는 컨테이너 내부에 <img>와 <canvas>를 생성합니다.
            qrcodeInstance = new QRCode(qrcodeContainer, {
                text: text,
                width: 256,
                height: 256,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H // 오류 복원 수준
            });

            // 다운로드 버튼 표시
            downloadBtn.classList.remove('hidden');
        });

        // 다운로드 버튼 클릭 이벤트
        downloadBtn.addEventListener('click', () => {
            // qrcode.js는 QR 코드를 <img> 태그로 만듭니다.
            // <img> 태그의 src는 base64 인코딩된 데이터 URL입니다.
            const img = qrcodeContainer.querySelector('img');

            if (img && img.src) {
                // 임시 다운로드 링크 생성
                const link = document.createElement('a');
                link.href = img.src;
                link.download = 'qrcode.png'; // 저장될 파일 이름
                
                // 링크를 body에 추가하고 클릭한 뒤 제거
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } 
            // 혹시 canvas로 생성되었을 경우의 예비 코드
            else {
                const canvas = qrcodeContainer.querySelector('canvas');
                if (canvas) {
                    const link = document.createElement('a');
                    link.href = canvas.toDataURL('image/png');
                    link.download = 'qrcode.png';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
            }
        });
    </script>

</body>
</html>
